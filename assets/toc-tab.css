/*! Covenant ToC Tab Module v1.0.3 (Keep tab visible while ToC open) */

/* Visible ToC tab (aligned to container margin; becomes fixed when header leaves viewport).
   Icon-only: the glyph is the whole handle; accessible name is via aria-label + sr-only. */
.toc-tab-toggle{position:absolute;top:12px;left:0;width:44px;height:40px;display:inline-flex;align-items:center;justify-content:center;padding:0;border-radius:12px;border:1px solid rgba(44,62,80,.18);border-bottom-color:rgba(44,62,80,.26);background:linear-gradient(to bottom,rgba(255,255,255,.72),rgba(255,255,255,.22));box-shadow:0 10px 24px rgba(0,0,0,.10),0 1px 0 rgba(255,255,255,.40),inset 0 10px 16px -18px rgba(0,0,0,.55);font-family:'Cormorant Garamond',serif;font-size:.92rem;font-weight:650;letter-spacing:.12em;font-variant-caps:all-small-caps;color:rgba(44,62,80,.78);cursor:pointer;-webkit-tap-highlight-color:transparent;touch-action:manipulation;user-select:none;-webkit-user-select:none;z-index:1500}
.toc-tab-toggle:focus-visible{outline:2px solid rgba(201,169,97,.45);outline-offset:4px}
.toc-tab-toggle:hover{color:rgba(44,62,80,.88);border-color:rgba(44,62,80,.22)}
.toc-tab-toggle:active{filter:brightness(.98)}

.toc-tab-glyph{display:inline-block;font-family:'Noto Sans Symbols 2','Noto Sans Symbols','Segoe UI Symbol','Apple Symbols',serif;font-size:1.14rem;line-height:1;transform:translateY(-.5px);opacity:.92}

/* Sticky posture: pinned to viewport; JS sets left + --toc-tab-left. */
.toc-tab-toggle.is-sticky{position:fixed;top:14px}

/* Optional tether: a quiet rule reaching to the left edge (JS supplies --toc-tab-left in px). */
.toc-tab-toggle.is-sticky::before{content:'';position:absolute;top:50%;left:calc(-1 * var(--toc-tab-left, 0px));width:var(--toc-tab-left, 0px);height:1px;transform:translateY(-50%);background:linear-gradient(to right,rgba(139,115,85,0),rgba(139,115,85,.22),rgba(139,115,85,.34));opacity:.78;pointer-events:none}

/* While ToC is open, let the tab read as the close handle (subtle). */
html.toc-open .toc-tab-toggle,html.toc-closing .toc-tab-toggle{border-color:rgba(44,62,80,.22);box-shadow:0 10px 28px rgba(0,0,0,.12),0 0 0 1px rgba(201,169,97,.10),inset 0 10px 16px -18px rgba(0,0,0,.55)}

/* Summoned title strip: appears only during the open gesture when header is offscreen.
   It must be visible while choosing, so it sits above the dim overlay but below the panel. */
.toc-summoned-title{position:fixed;top:14px;left:120px;right:24px;height:40px;display:flex;align-items:center;padding:0 1rem;border-radius:0 12px 12px 0;border:1px solid rgba(44,62,80,.16);border-left:none;background:linear-gradient(to bottom,rgba(247,244,238,1),rgba(243,240,234,1));box-shadow:0 16px 34px rgba(0,0,0,.14),inset 0 10px 18px -20px rgba(0,0,0,.52);color:rgba(44,62,80,.86);font-family:'Crimson Text',serif;font-size:1.05rem;font-weight:600;letter-spacing:.12em;text-transform:uppercase;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;transform:scaleX(.02);transform-origin:0 50%;opacity:0;z-index:1400;pointer-events:none;transition:transform 240ms cubic-bezier(.22,.61,.36,1),opacity 120ms ease}
.toc-summoned-title.is-revealed{transform:scaleX(1);opacity:1}
.toc-summoned-title.is-hiding{transform:scaleX(.02);opacity:0}

/* Do not compete with Lexicon overlays/locks. */
html.lexicon-scroll-lock .toc-tab-toggle{opacity:0;visibility:hidden;pointer-events:none}

@media (prefers-reduced-motion: reduce){.toc-summoned-title{transition:none;transform:scaleX(1);opacity:1}}

@media (max-width:600px){.toc-tab-toggle{top:10px;width:42px;height:38px;border-radius:12px}.toc-summoned-title{height:38px}}
