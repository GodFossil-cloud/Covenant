/* Lexicon (locked): should read sealed/embedded (opaque), with touch/press feedback going black (not brass-gold).

   Scope:
   - At-rest styling: locked state only (ui-stack gate).
   - Reliquary gate: Reliquary styles historically dimmed Lexicon via opacity; we override that to
     avoid a darken-then-revert "overshoot" when Reliquary commits open.
   - Intent styling: :active, .is-nudging, .is-pulsing.
   - Does not change enabled behavior.
*/

/* -------------------------------------------------
   Reliquary gate compatibility
   ------------------------------------------------- */

/* reliquary.css dims #lexiconToggle via opacity during reliquary-open/closing/dragging.
   That can visually overshoot (too dark) and then "snap back" once ui-stack applies the locked
   attributes/classes. Keep the seal opaque and let the embedded styling carry the lock message.
*/
html.reliquary-opening #navFooter #lexiconToggle:not([aria-expanded="true"]),
html.reliquary-open #navFooter #lexiconToggle:not([aria-expanded="true"]),
html.reliquary-closing #navFooter #lexiconToggle:not([aria-expanded="true"]),
html.reliquary-dragging #navFooter #lexiconToggle:not([aria-expanded="true"]){
  opacity:1 !important;
  filter:none !important;
  cursor:not-allowed;
}

/* Dark, embedded face (with a faint "barred" hatch so it reads locked, not merely off). */
html.reliquary-opening #navFooter #lexiconToggle:not([aria-expanded="true"])::after,
html.reliquary-open #navFooter #lexiconToggle:not([aria-expanded="true"])::after,
html.reliquary-closing #navFooter #lexiconToggle:not([aria-expanded="true"])::after,
html.reliquary-dragging #navFooter #lexiconToggle:not([aria-expanded="true"])::after{
  background-color:#020203 !important;
  background-image:
    radial-gradient(120% 150% at 50% 10%, rgba(255,255,255,0.05), rgba(255,255,255,0) 52%),
    radial-gradient(140% 190% at 50% 118%, rgba(0,0,0,0.98), rgba(0,0,0,0) 62%),
    repeating-linear-gradient(135deg,
      rgba(255,255,255,0.055) 0 1px,
      rgba(0,0,0,0) 1px 7px
    ),
    linear-gradient(to bottom, rgba(255,255,255,0.03), rgba(0,0,0,0.66));

  box-shadow:
    inset 0 0 26px rgba(0,0,0,0.92),
    inset 0 -22px 26px rgba(0,0,0,0.88),
    inset 0 12px 18px -18px rgba(255,255,255,0.10);
}

html.reliquary-opening #navFooter #lexiconToggle:not([aria-expanded="true"])::before,
html.reliquary-open #navFooter #lexiconToggle:not([aria-expanded="true"])::before,
html.reliquary-closing #navFooter #lexiconToggle:not([aria-expanded="true"])::before,
html.reliquary-dragging #navFooter #lexiconToggle:not([aria-expanded="true"])::before{
  border-color:rgba(0,0,0,0.92) !important;
  box-shadow:
    inset 0 0 34px rgba(0,0,0,1),
    inset 0 3px 18px rgba(0,0,0,0.86),
    inset 0 1px 0 rgba(255,255,255,0.02),
    inset 0 -1px 0 rgba(255,255,255,0.015),
    0 0 0 1px rgba(0,0,0,0.94) !important;
}

html.reliquary-opening #navFooter #lexiconToggle:not([aria-expanded="true"]) .lexicon-glyph,
html.reliquary-open #navFooter #lexiconToggle:not([aria-expanded="true"]) .lexicon-glyph,
html.reliquary-closing #navFooter #lexiconToggle:not([aria-expanded="true"]) .lexicon-glyph,
html.reliquary-dragging #navFooter #lexiconToggle:not([aria-expanded="true"]) .lexicon-glyph,
html.reliquary-opening #navFooter #lexiconToggle:not([aria-expanded="true"]) .lexicon-glyph-mid-inner,
html.reliquary-open #navFooter #lexiconToggle:not([aria-expanded="true"]) .lexicon-glyph-mid-inner,
html.reliquary-closing #navFooter #lexiconToggle:not([aria-expanded="true"]) .lexicon-glyph-mid-inner,
html.reliquary-dragging #navFooter #lexiconToggle:not([aria-expanded="true"]) .lexicon-glyph-mid-inner{
  color:rgba(201, 169, 97, 0.30) !important;
  text-shadow:
    0 1px 0 rgba(0,0,0,0.94),
    0 -1px 0 rgba(255,255,255,0.05) !important;
  filter:none !important;
}

html.reliquary-opening #navFooter #lexiconToggle:not([aria-expanded="true"]) .lexicon-glyph,
html.reliquary-open #navFooter #lexiconToggle:not([aria-expanded="true"]) .lexicon-glyph,
html.reliquary-closing #navFooter #lexiconToggle:not([aria-expanded="true"]) .lexicon-glyph,
html.reliquary-dragging #navFooter #lexiconToggle:not([aria-expanded="true"]) .lexicon-glyph{
  transform:translateY(1px);
}

html.reliquary-opening #navFooter #lexiconToggle:not([aria-expanded="true"]) .lexicon-glyph::before,
html.reliquary-open #navFooter #lexiconToggle:not([aria-expanded="true"]) .lexicon-glyph::before,
html.reliquary-closing #navFooter #lexiconToggle:not([aria-expanded="true"]) .lexicon-glyph::before,
html.reliquary-dragging #navFooter #lexiconToggle:not([aria-expanded="true"]) .lexicon-glyph::before{
  opacity:0 !important;
  animation:none !important;
  filter:none !important;
}

html.reliquary-opening #navFooter #lexiconToggle:not([aria-expanded="true"]).has-selection .lexicon-glyph,
html.reliquary-open #navFooter #lexiconToggle:not([aria-expanded="true"]).has-selection .lexicon-glyph,
html.reliquary-closing #navFooter #lexiconToggle:not([aria-expanded="true"]).has-selection .lexicon-glyph,
html.reliquary-dragging #navFooter #lexiconToggle:not([aria-expanded="true"]).has-selection .lexicon-glyph,
html.reliquary-opening #navFooter #lexiconToggle:not([aria-expanded="true"]).has-selection .lexicon-glyph-mid-inner,
html.reliquary-open #navFooter #lexiconToggle:not([aria-expanded="true"]).has-selection .lexicon-glyph-mid-inner,
html.reliquary-closing #navFooter #lexiconToggle:not([aria-expanded="true"]).has-selection .lexicon-glyph-mid-inner,
html.reliquary-dragging #navFooter #lexiconToggle:not([aria-expanded="true"]).has-selection .lexicon-glyph-mid-inner{
  color:rgba(242, 220, 154, 0.44) !important;
}


/* -------------------------------------------------
   Locked at-rest: embedded, opaque, "locked".
   ------------------------------------------------- */

#navFooter #lexiconToggle.is-lexicon-locked,
#navFooter #lexiconToggle[data-lexicon-locked="true"],
#navFooter #lexiconToggle[aria-disabled="true"]{
  opacity:1 !important;
  filter:none !important;
  cursor:not-allowed;
}

/* Darken the medallion face (no dimming). */
#navFooter #lexiconToggle.is-lexicon-locked::after,
#navFooter #lexiconToggle[data-lexicon-locked="true"]::after,
#navFooter #lexiconToggle[aria-disabled="true"]::after{
  background-color:#020203 !important;

  /* Harder inlay/vignette + faint hatch so it reads "barred" (locked). */
  background-image:
    radial-gradient(120% 150% at 50% 10%, rgba(255,255,255,0.05), rgba(255,255,255,0) 52%),
    radial-gradient(140% 190% at 50% 118%, rgba(0,0,0,0.98), rgba(0,0,0,0) 62%),
    repeating-linear-gradient(135deg,
      rgba(255,255,255,0.055) 0 1px,
      rgba(0,0,0,0) 1px 7px
    ),
    linear-gradient(to bottom, rgba(255,255,255,0.03), rgba(0,0,0,0.66));

  box-shadow:
    inset 0 0 26px rgba(0,0,0,0.92),
    inset 0 -22px 26px rgba(0,0,0,0.88),
    inset 0 12px 18px -18px rgba(255,255,255,0.10);

  transition:background-color 160ms linear;
}

/* Deepen the rim/seat so the seal feels welded shut. */
#navFooter #lexiconToggle.is-lexicon-locked::before,
#navFooter #lexiconToggle[data-lexicon-locked="true"]::before,
#navFooter #lexiconToggle[aria-disabled="true"]::before{
  border-color:rgba(0,0,0,0.92) !important;
  box-shadow:
    inset 0 0 34px rgba(0,0,0,1),
    inset 0 3px 18px rgba(0,0,0,0.86),
    inset 0 1px 0 rgba(255,255,255,0.02),
    inset 0 -1px 0 rgba(255,255,255,0.015),
    0 0 0 1px rgba(0,0,0,0.94) !important;
}

/* Glyph: keep it readable, but colder + slightly "pressed in" (no aura). */
#navFooter #lexiconToggle.is-lexicon-locked .lexicon-glyph,
#navFooter #lexiconToggle.is-lexicon-locked .lexicon-glyph-mid-inner,
#navFooter #lexiconToggle[data-lexicon-locked="true"] .lexicon-glyph,
#navFooter #lexiconToggle[data-lexicon-locked="true"] .lexicon-glyph-mid-inner,
#navFooter #lexiconToggle[aria-disabled="true"] .lexicon-glyph,
#navFooter #lexiconToggle[aria-disabled="true"] .lexicon-glyph-mid-inner{
  color:rgba(201, 169, 97, 0.30) !important;
  text-shadow:
    0 1px 0 rgba(0,0,0,0.94),
    0 -1px 0 rgba(255,255,255,0.05) !important;
  filter:none !important;
}

#navFooter #lexiconToggle.is-lexicon-locked .lexicon-glyph,
#navFooter #lexiconToggle[data-lexicon-locked="true"] .lexicon-glyph,
#navFooter #lexiconToggle[aria-disabled="true"] .lexicon-glyph{transform:translateY(1px)}

#navFooter #lexiconToggle.is-lexicon-locked .lexicon-glyph::before,
#navFooter #lexiconToggle[data-lexicon-locked="true"] .lexicon-glyph::before,
#navFooter #lexiconToggle[aria-disabled="true"] .lexicon-glyph::before{
  opacity:0 !important;
  animation:none !important;
  filter:none !important;
}

/* If a selection exists but the Lexicon is locked, keep the leaf hint subdued (still embedded). */
#navFooter #lexiconToggle.is-lexicon-locked.has-selection .lexicon-glyph,
#navFooter #lexiconToggle.is-lexicon-locked.has-selection .lexicon-glyph-mid-inner,
#navFooter #lexiconToggle[data-lexicon-locked="true"].has-selection .lexicon-glyph,
#navFooter #lexiconToggle[data-lexicon-locked="true"].has-selection .lexicon-glyph-mid-inner,
#navFooter #lexiconToggle[aria-disabled="true"].has-selection .lexicon-glyph,
#navFooter #lexiconToggle[aria-disabled="true"].has-selection .lexicon-glyph-mid-inner{
  color:rgba(242, 220, 154, 0.44) !important;
}

/* Keep hover/focus quiet while locked (no brightening).
   NOTE: the toggle remains focusable for the "locked breath" feedback.
*/
#navFooter #lexiconToggle.is-lexicon-locked:hover,
#navFooter #lexiconToggle.is-lexicon-locked:focus-visible,
#navFooter #lexiconToggle[data-lexicon-locked="true"]:hover,
#navFooter #lexiconToggle[data-lexicon-locked="true"]:focus-visible,
#navFooter #lexiconToggle[aria-disabled="true"]:hover,
#navFooter #lexiconToggle[aria-disabled="true"]:focus-visible{
  text-shadow:none !important;
  filter:none !important;
}


/* -------------------------------------------------
   Locked intent feedback: black (not gold).
   ------------------------------------------------- */

#navFooter #lexiconToggle.is-lexicon-locked:active .lexicon-glyph,
#navFooter #lexiconToggle.is-lexicon-locked.is-nudging .lexicon-glyph,
#navFooter #lexiconToggle.is-lexicon-locked.is-pulsing .lexicon-glyph,
#navFooter #lexiconToggle.is-lexicon-locked:active .lexicon-glyph-mid-inner,
#navFooter #lexiconToggle.is-lexicon-locked.is-nudging .lexicon-glyph-mid-inner,
#navFooter #lexiconToggle.is-lexicon-locked.is-pulsing .lexicon-glyph-mid-inner,
#navFooter #lexiconToggle[data-lexicon-locked="true"]:active .lexicon-glyph,
#navFooter #lexiconToggle[data-lexicon-locked="true"].is-nudging .lexicon-glyph,
#navFooter #lexiconToggle[data-lexicon-locked="true"].is-pulsing .lexicon-glyph,
#navFooter #lexiconToggle[data-lexicon-locked="true"]:active .lexicon-glyph-mid-inner,
#navFooter #lexiconToggle[data-lexicon-locked="true"].is-nudging .lexicon-glyph-mid-inner,
#navFooter #lexiconToggle[data-lexicon-locked="true"].is-pulsing .lexicon-glyph-mid-inner{
  color:#000 !important;
  text-shadow:none !important;
  filter:none !important;
}

#navFooter #lexiconToggle.is-lexicon-locked:active .lexicon-glyph::before,
#navFooter #lexiconToggle.is-lexicon-locked.is-nudging .lexicon-glyph::before,
#navFooter #lexiconToggle.is-lexicon-locked.is-pulsing .lexicon-glyph::before,
#navFooter #lexiconToggle[data-lexicon-locked="true"]:active .lexicon-glyph::before,
#navFooter #lexiconToggle[data-lexicon-locked="true"].is-nudging .lexicon-glyph::before,
#navFooter #lexiconToggle[data-lexicon-locked="true"].is-pulsing .lexicon-glyph::before{
  opacity:0 !important;
  animation:none !important;
  filter:none !important;
}
